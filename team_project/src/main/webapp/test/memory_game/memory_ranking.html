<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEMORY GAME RANKING</title>
<style>
        /* í°íŠ¸ ë“±ë¡ */
        @font-face {
            font-family: 'PixelFont'; 
            src: url('../DungGeunMo.ttf') format('truetype'); 
            font-weight: normal;
            font-style: normal;
        }

        /* ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ë° ë°°ê²½ */
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url('memory_img/memorygameë°°ê²½.png'); 
            background-size: cover;
            background-position: center;
            font-family: 'PixelFont', Arial, sans-serif;
            overflow: hidden;
            background-repeat: no-repeat;
            background-size: 60% auto;
            background-color: #87CEEB;
        }

        .container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'PixelFont', monospace;
        }

        .register-window {
            width: 700px; 
            height: 500px; 
            background-color: rgba(0, 0, 0, 0.8);
            border: 4px solid #3a3a3a;
            display: flex;
            flex-direction: column;
            color: #3a3a3a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            padding: 20px;
            box-sizing: border-box;
            margin-bottom: 20px;
        }

        /* íƒ€ì´í‹€ ë°” */
        .title-bar {
            background-color: #3a3a3a;
            color: white;
            font-size: 24px;
            padding: 10px 0;
            text-align: center;
            margin-bottom: 5px;
            border-bottom: 2px solid #5a5a5a;
            text-shadow: 2px 2px 0 #000;
        }

        /* ì…ë ¥ í•„ë“œ ë° ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
        .content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 10px;
            justify-content: flex-start; 
        }

        /* -------------------------------------------
        * ë­í‚¹ í…Œì´ë¸” ìŠ¤íƒ€ì¼ 
        * ------------------------------------------- */
        #ranking-list {
            width: 90%;
            height: 100%;
            overflow-y: auto;
        }
        
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 25px;
            color: white;
            table-layout: fixed;
        }

        .ranking-table th, .ranking-table td {
            padding: 10px 5px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            text-shadow: 1px 1px 0 #000;
        }
        
        .ranking-table th {
            background-color: #5a5a5a;
            border-bottom: 3px solid #8b4513;
            font-weight: bold;
        }

        .ranking-table tr:nth-child(odd) {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* 1ë“± íŠ¹ë³„ ê°•ì¡° */
        .ranking-table tr:nth-child(2) {
            color: gold;
            font-size: 28px;
            text-shadow: 2px 2px 0 #8b4513;
        }

        /* ì¹¼ëŸ¼ë³„ ë„ˆë¹„ ì§€ì • */
        .ranking-table col:nth-child(1) { width: 15%; }
        .ranking-table col:nth-child(2) { width: 55%; }
        .ranking-table col:nth-child(3) { width: 30%; }

        /* ë¡œë”© ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        #ranking-status {
            color: white;
            font-size: 30px;
            margin-top: 50px;
        }
        
        /* -------------------------------------------
        * í‘¸í„° ë²„íŠ¼ ì˜ì—­ (ì–‘ ë ë°°ì¹˜)
        * ------------------------------------------- */
        .buttons-footer {
            width: 700px; 
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            box-sizing: border-box;
        }

        /* ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .next-button {
            width: 250px;
            height: 75px; 
            margin: 0; 
            background-color: #d89617;
            color: white;
			font-family: 'PixelFont', monospace; 
            font-size: 45px; 
            border: 4px solid #8b4513;
            cursor: pointer;
            text-shadow: 2px 2px 0 #8b4513;
            box-shadow: 
                -4px -4px 0 #ffe082 inset, 
                 4px  4px 0 #8b4513 inset;
            line-height: 42px; 
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.1s;
            text-align: center;
        }

        .next-button:hover {
            background-color: #e0ac42;
        }
    </style>

</head>

<body>
    <div class="container">
        <div class="register-window">
            <div class="title-bar">MEMORY GAME RANKING</div>

            <div class="content-area">
                <div id="ranking-list">
                    <p id="ranking-status">ë­í‚¹ ë¡œë”© ì¤‘...</p>
                </div>
            </div>
        </div>
        
        <div class="buttons-footer">
            <button class="next-button" id="menu-button">MENU</button>
            <button class="next-button" id="start-button">START</button>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const menuButton = document.getElementById('menu-button');
            const startButton = document.getElementById('start-button');
            const rankingListDiv = document.getElementById('ranking-list');
            
            // ë­í‚¹ ë°ì´í„°ë¥¼ ì„œë²„ì—ì„œ ê°€ì ¸ì™€ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
            function fetchAndDisplayRanking() {
                const apiUrl = '/team_project/api/memoryRanking'; // â­ï¸ ì„œë¸”ë¦¿ URL

                fetch(apiUrl)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(rankingData => {
                        if (rankingData.length === 0) {
                            rankingListDiv.innerHTML = '<p id="ranking-status">ì•„ì§ ë“±ë¡ëœ ë­í‚¹ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                            return;
                        }
                        
                        // ë­í‚¹ í…Œì´ë¸” ìƒì„±
                        let tableHTML = `
                            <table class="ranking-table">
                                <colgroup>
                                    <col>
                                    <col>
                                    <col>
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th>ìˆœìœ„</th>
                                        <th>ë‹‰ë„¤ì„</th>
                                        <th>ì ìˆ˜</th>
                                    </tr>
                                </thead>
                                <tbody>
                        `;

                        rankingData.forEach((entry, index) => {
                            tableHTML += `
                                <tr>
                                    <td>${entry.rank}</td>
                                    <td>${entry.nickname}</td>
                                    <td>${entry.score}</td>
                                </tr>
                            `;
                        });

                        tableHTML += `
                                </tbody>
                            </table>
                        `;
                        
                        rankingListDiv.innerHTML = tableHTML;

                    })
                    .catch(error => {
                        console.error('ë­í‚¹ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                        rankingListDiv.innerHTML = `<p id="ranking-status">ë­í‚¹ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (${error.message})</p>`;
                    });
            }

            // í˜ì´ì§€ ë¡œë“œ ì‹œ ë­í‚¹ ë¶ˆëŸ¬ì˜¤ê¸°
            fetchAndDisplayRanking();


            // ğŸš© MENU ë²„íŠ¼ í´ë¦­ ì‹œ ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
            menuButton.addEventListener('click', () => {
                window.location.href = 'memory_gamestart.html'; 
            });
            
            // ğŸš© START ë²„íŠ¼ í´ë¦­ ì‹œ ê²Œì„ ì‹œì‘ í™”ë©´ìœ¼ë¡œ ì´ë™
            startButton.addEventListener('click', () => {
                window.location.href = 'memory_game.html'; 
            });
        });
    </script>
</body>
</html>